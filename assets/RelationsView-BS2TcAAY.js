import{d as A,k as z,r as _,o as H,b as V,c as i,f as e,F as u,i as d,p as S,n as v,t as m,m as D,e as r,_ as F}from"./index-TJ4MmN-U.js";const Y=[{groupName:"Ex-Lilith",members:[{id:"hazuki",name:"丰川羽月",avatar:"images/avatar/hazuki.png"},{id:"riko",name:"八幡莉子",avatar:"images/avatar/riko.png"},{id:"ameha",name:"若叶天叶",avatar:"images/avatar/ameha.png"},{id:"wakaho",name:"若叶若穗",avatar:"images/avatar/wakaho.png"}]},{groupName:"Go Raiiii",members:[{id:"mirei",name:"椎名美铃",avatar:"images/avatar/mirei.png"},{id:"shizuku",name:"高松雫",avatar:"images/avatar/shizuku.png"},{id:"anna",name:"长崎杏奈",avatar:"images/avatar/anna.png"},{id:"muna",name:"若叶梦那",avatar:"images/avatar/muna.png"}]},{groupName:"Other",members:[{id:"sora",name:"千早空",avatar:"images/avatar/sora.png"}]}],q={hazuki:{riko:`莉子(同学)
riko (san)`,ameha:`天叶
ameha`,wakaho:`若穗
wakaho`,mirei:`小美铃
mirei chan`,shizuku:`小雫
shizuku chan`,anna:`小杏奈
anna chan`,muna:`小梦那
muna chan`,sora:`小空
sora chan`},riko:{hazuki:`丰川/羽月 同学
togawa/hazuki san`,ameha:`天叶
ameha`,wakaho:`若穗
wakaho`,mirei:`喂/美铃
mirei`,shizuku:`雫雫
ルル ruru`,anna:`小安
ann chan`,muna:`若叶同学
wakaba san`,sora:`小空
sora chan`},ameha:{hazuki:`小羽月
hazuki chan`,riko:`莉子/小莉子
riko/koriko`,wakaho:`若
waka`,mirei:`小美铃
mirei chan`,shizuku:`雫雫
ルル ruru chan`,anna:`小杏奈
anna chan`,muna:`小梦那
muna chan`,sora:`小空
sora chan`},wakaho:{hazuki:`月
zuki`,riko:`莉子
riko`,ameha:`天
ame`,mirei:`美铃铃
mirin`,shizuku:`雫雫
ルル ruru`,anna:`杏奈
anna`,muna:`梦那
muna`,sora:`小空
sora chan`},shizuku:{hazuki:`小月
zuki chan`,riko:`姐姐/莉子
neesan/riko`,ameha:`小天
ame chan`,wakaho:`小若
waka chan`,mirei:`美铃铃
mirin chan`,anna:`小安
ann chan`,muna:`小猫
nyanko chan`,sora:`小空
sora chan`},mirei:{hazuki:`羽月姐姐
hazuki san`,riko:`莉子/姐姐
koriko/nee`,ameha:`天叶
ameha chan`,wakaho:`小若穗
wakaho chan`,shizuku:`雫雫
ルル ruru`,anna:`小安
ann`,muna:`梦那
muna`,sora:`小空
sora chan`},anna:{hazuki:`羽月姐姐
hazuki san`,riko:`姐姐/莉子姐姐
oneesan/riko san`,ameha:`天叶
ameha chan`,wakaho:`小若穗
wakaho chan`,shizuku:`雫雫
ルル ruru chan`,mirei:`美铃
mirin`,muna:`小梦那
muna chan`,sora:`小空
sora chan`},muna:{hazuki:`羽月姐姐
hazuki san`,riko:`姐姐/莉子姐姐
oneesan/riko san`,ameha:`天姐
ame nee`,wakaho:`若姐
waka nee`,shizuku:`小雫
shizuku chan`,mirei:`美子
mi ko`,anna:`杏子
ann ko`,sora:`小空
sora chan`},sora:{hazuki:`姐姐/羽月姐姐
oneesan/hazuki san`,riko:`姐姐/莉子姐姐
oneesan/riko san`,ameha:`姐姐/天叶姐姐
oneesan/ameha san`,wakaho:`姐姐/若穗姐姐
oneesan/wakaho san`,shizuku:`雫雫
ルル ruru chan`,mirei:`姐姐/美铃姐姐
oneesan/mirei san`,anna:`姐姐
neesan`,muna:`姐姐/梦那姐姐
oneesan/muna san`}},G=[{child:[{id:"hazuki",name:"丰川羽月",avatar:"images/avatar/hazuki.png"}],mother:[{name:"丰川祥子",avatar:"images/avatar/sakiko.png"},{name:"三角初华",avatar:"images/avatar/uika.png"}],type:"birth"},{child:[{id:"riko",name:"八幡莉子",avatar:"images/avatar/riko.png"},{id:"mirei",name:"椎名美铃",avatar:"images/avatar/mirei.png"}],mother:[{name:"八幡海铃",avatar:"images/avatar/umiri.png"},{name:"椎名立希",avatar:"images/avatar/taki.png"}],type:"birth"},{child:[{id:"ameha",name:"若叶天叶",avatar:"images/avatar/ameha.png"},{id:"wakaho",name:"若叶若穗",avatar:"images/avatar/wakaho.png"},{id:"muna",name:"若叶梦那",avatar:"images/avatar/muna.png"}],mother:[{name:"祐天寺若麦",avatar:"images/avatar/nyamu.png"},{name:"若叶睦",avatar:"images/avatar/mutsumi.png"}],type:"birth"},{child:[{id:"anna",name:"长崎杏奈",avatar:"images/avatar/anna.png"},{id:"sora",name:"千早空",avatar:"images/avatar/sora.png"}],mother:[{name:"长崎素世",avatar:"images/avatar/soyo.png"},{name:"千早爱音",avatar:"images/avatar/anon.png"}],type:"birth"},{child:{id:"shizuku",name:"高松雫",avatar:"images/avatar/shizuku.png"},mother:[{name:"高松灯",avatar:"images/avatar/tomori.png"},{name:"要乐奈",avatar:"images/avatar/rana.png"}],type:"adopt"}],b={characters:Y,callTable:q,familyTree:G},U={class:"relations-view"},W={class:"sidebar"},j={class:"nav-list"},J=["onClick"],K={class:"label"},Q={class:"page-container"},X={id:"section-table",class:"section-block"},Z={class:"table-scroll-wrapper"},aa={class:"call-table"},na={class:"header-avator"},ea=["src"],sa={class:"header-char"},ta={class:"th-content"},oa={class:"td-content"},ia=["onMouseenter"],ra={key:0,class:"call-content"},la={class:"romaji"},ca={key:1,class:"dash"},ua={id:"section-network",class:"section-block"},da={class:"network-container desktop-only"},ha={class:"circle-layout"},ma={class:"lines-layer",viewBox:"0 0 500 500"},va=["x1","y1","x2","y2"],ga=["onMouseenter"],ka={class:"node-circle"},pa={class:"node-text"},wa={id:"section-family",class:"section-block"},_a={class:"genealogy-grid"},fa={class:"parents-row"},ya=["src"],za={class:"name"},ba={class:"child-row"},xa=["src"],Ea={class:"name"},Ma=A({__name:"RelationsView",setup(Ca){const T="/band-next-gen/",f=s=>{if(!s)return"";const n=s.startsWith("/")?s.slice(1):s;return`${T}${n}`},c=z(()=>b.characters.flatMap(s=>s.members)),I=b.callTable,g=_(null),k=_(null),N=(s,n)=>{g.value=s,k.value=n},P=()=>{g.value=null,k.value=null},x=(s,n)=>I[s]?.[n]||"?",y=_("section-table"),E=[{id:"section-table",label:"称呼表"},{id:"section-network",label:"关系网"},{id:"section-family",label:"亲缘谱"}],$=s=>{y.value=s;const n=document.getElementById(s);if(n){const a=getComputedStyle(document.documentElement).getPropertyValue("--header-height").trim(),o=parseInt(a||"0")+0,w=n.getBoundingClientRect().top+window.pageYOffset-o-20;window.scrollTo({top:w,behavior:"smooth"})}},M=()=>{const n=window.scrollY;for(const a of E){const t=document.getElementById(a.id);if(t){if(window.innerWidth<=768&&a.id==="section-network")continue;const{offsetTop:o,offsetHeight:h}=t;n>=o-300&&n<o+h-300&&(y.value=a.id)}}};H(()=>{window.addEventListener("scroll",M);const s=new IntersectionObserver(n=>{n.forEach(a=>{a.isIntersecting&&(a.target.classList.add("visible"),s.unobserve(a.target))})},{threshold:.1});document.querySelectorAll(".section-title").forEach(n=>s.observe(n))}),V(()=>{window.removeEventListener("scroll",M)});const l=_(null),C=z(()=>{const s=[],n=c.value.map(a=>a.id);return n.forEach((a,t)=>{t<n.length-1&&s.push({source:a,target:n[t+1]}),t<n.length-2&&s.push({source:a,target:n[t+2]}),t===n.length-1&&s.push({source:a,target:n[0]})}),s}),p=s=>{const n=c.value.findIndex(w=>w.id===s);if(n===-1)return{x:250,y:250};const a=c.value.length,t=180,h=(360/a*n-90)*Math.PI/180;return{x:250+Math.cos(h)*t,y:250+Math.sin(h)*t}},B=(s,n)=>{const a=c.value[s];if(!a)return{};const t=p(a.id);return{left:`${t.x}px`,top:`${t.y}px`}},O=s=>{if(!l.value)return!0;const n=s===l.value,a=C.value.some(t=>t.source===l.value&&t.target===s||t.target===l.value&&t.source===s);return n||a},L=s=>l.value?s.source===l.value||s.target===l.value:!0,R=z(()=>b.familyTree.map(s=>({...s,child:Array.isArray(s.child)?s.child:[s.child]})));return(s,n)=>(r(),i("div",U,[e("nav",W,[n[2]||(n[2]=e("div",{class:"nav-line"},null,-1)),e("ul",j,[(r(),i(u,null,d(E,(a,t)=>e("li",{key:t,class:v(["nav-item",{active:y.value===a.id}]),onClick:o=>$(a.id)},[n[1]||(n[1]=e("span",{class:"dot"},null,-1)),e("span",K,m(a.label),1)],10,J)),64))])]),e("div",Q,[e("section",X,[n[6]||(n[6]=e("h2",{class:"section-title"},[e("span",null,"称呼表")],-1)),e("div",Z,[e("table",aa,[e("thead",null,[e("tr",na,[n[3]||(n[3]=e("th",{class:"fixed-col"},null,-1)),(r(!0),i(u,null,d(c.value,a=>(r(),i("th",{key:a.id},[e("img",{src:f(a.avatar),class:"avatar-square",loading:"lazy"},null,8,ea)]))),128))]),n[5]||(n[5]=e("tr",{class:"header-group"},[e("th",{class:"fixed-col"},[e("span",{class:"group-label"},"所属乐队")]),e("th",{colspan:"4",class:"group-name lilith"},"Ex-Lilith"),e("th",{colspan:"4",class:"group-name gorai"},"Go Raiiii"),e("th",{colspan:"1",class:"group-name other"},"Other")],-1)),e("tr",sa,[n[4]||(n[4]=e("th",{class:"corner-header fixed-col"},[e("span",{class:"corner-comment"},"称呼→被称呼")],-1)),(r(!0),i(u,null,d(c.value,a=>(r(),i("th",{key:a.id,class:v({"highlight-col":k.value===a.id})},[e("div",ta,m(a.name),1)],2))),128))])]),e("tbody",null,[(r(!0),i(u,null,d(c.value,(a,t)=>(r(),i("tr",{key:a.id},[e("td",{class:v(["row-header fixed-col",{"highlight-row":g.value===a.id}])},[e("div",oa,m(a.name),1)],2),(r(!0),i(u,null,d(c.value,(o,h)=>(r(),i("td",{key:o.id,class:v(["cell",{active:g.value===a.id&&k.value===o.id,"cross-highlight":g.value===a.id||k.value===o.id,self:a.id===o.id,"bg-lilith":t<4&&h<4,"bg-gorai":t>=4&&h>=4}]),onMouseenter:w=>N(a.id,o.id),onMouseleave:P},[a.id!==o.id?(r(),i("div",ra,[S(m(x(a.id,o.id).split(`
`)[0])+" ",1),e("span",la,m(x(a.id,o.id).split(`
`)[1]||""),1)])):(r(),i("span",ca,"—"))],42,ia))),128))]))),128))])])]),n[7]||(n[7]=e("div",{class:"section-comment"},"头像尚未导入，暂时以圆圈名字替代",-1))]),e("section",ua,[n[9]||(n[9]=e("h2",{class:"section-title"},[e("span",null,"关系网")],-1)),e("div",da,[n[8]||(n[8]=S(" 该模块正在制作中，当前仅演示初版效果： ",-1)),e("div",ha,[(r(),i("svg",ma,[(r(!0),i(u,null,d(C.value,(a,t)=>(r(),i("line",{key:t,x1:p(a.source).x,y1:p(a.source).y,x2:p(a.target).x,y2:p(a.target).y,class:v(["network-line",{dimmed:l.value&&!L(a),active:L(a)}])},null,10,va))),128))])),(r(!0),i(u,null,d(c.value,(a,t)=>(r(),i("div",{key:a.id,class:v(["node-wrapper",{dimmed:l.value&&!O(a.id),active:l.value===a.id}]),style:D(B(t,c.value.length)),onMouseenter:o=>l.value=a.id,onMouseleave:n[0]||(n[0]=o=>l.value=null)},[e("div",ka,[e("span",pa,m(a.name.slice(-1)),1)])],46,ga))),128))])]),n[10]||(n[10]=e("div",{class:"mobile-network-msg"},[e("p",null,"正在进行手机端适配，暂不显示，请使用电脑端浏览器查看。")],-1))]),e("section",wa,[n[12]||(n[12]=e("h2",{class:"section-title"},[e("span",null,"亲缘谱")],-1)),e("div",_a,[(r(!0),i(u,null,d(R.value,(a,t)=>(r(),i("div",{key:t,class:"family-unit"},[e("div",fa,[(r(!0),i(u,null,d(a.mother,o=>(r(),i("div",{key:o.name,class:"parent-node"},[e("img",{src:f(o.avatar),class:"avatar-round",loading:"lazy"},null,8,ya),e("span",za,m(o.name),1)]))),128))]),e("div",{class:v(["connector",{"dashed-line":a.type==="adopt"}])},[...n[11]||(n[11]=[e("div",{class:"connector-top"},null,-1),e("div",{class:"connector-bottom"},null,-1)])],2),e("div",ba,[(r(!0),i(u,null,d(a.child,o=>(r(),i("div",{key:o.id,class:"child-node"},[e("img",{src:f(o.avatar),class:"avatar-round",loading:"lazy"},null,8,xa),e("span",Ea,m(o.name),1)]))),128))])]))),128))]),n[13]||(n[13]=e("div",{class:"section-comment"},"头像尚未导入，暂时以圆圈名字替代",-1))])])]))}}),Sa=F(Ma,[["__scopeId","data-v-164e5379"]]);export{Sa as default};
